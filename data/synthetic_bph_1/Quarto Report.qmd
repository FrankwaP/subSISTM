---
title: "Data generation and model"
format: pdf
editor: visual
---

## Import des bilbiothèques

```{r, echo:false}
library(rockchalk)
library(dplyr)
library(this.path)
library(lcmm) 
```

## Simulation

On simule 100 Dtrain de 25500 observations (500 individus \* 51 temps), 1 Dtest avec les mêmes

Modélisation : hlme( y_mixed_obs\~ x1_x5 + x2_x6, random=\~ x1_x5 + x2_x6, data = Dtrain, subject = 'individus', nproc = 15 )

Prédiction: predictY( oracle_mixed, newdata = Dtest, var.time = 'temps', marg = FALSE, subject = 'individus' )

## Import des résultats

```{r, echo: false}
MAE_train <- read.csv(file = paste(this.dir(), "/Résultats R script/MAE train.csv", sep = ""), sep=',')
MAE_test <- read.csv(file = paste(this.dir(), "/Résultats R script/MAE test.csv", sep = ""), sep=',')
MSE_train <- read.csv(file = paste(this.dir(), "/Résultats R script/MSE train.csv", sep = ""), sep=',')
MSE_test <- read.csv(file = paste(this.dir(), "/Résultats R script/MSE test.csv", sep = ""), sep = ',')
Valeurs_Biais <- read.csv(file = paste(this.dir(), "/Résultats R script/Valeurs et Biais.csv", sep = ""), sep = ',')
```

## Valeurs moyennes des effets

```{r, echo:false}
val_moy <- colMeans(Valeurs_Biais[c('µ.Gamma1','µ.Gamma2','µ.Gamma3','sigma.Gamma1','sigma.Gamma2','sigma.Gamma3')])
val_moy

```

## Biais moyens

```{r}
biais_moy <-colMeans(Valeurs_Biais[c('Biais.µ.Gamma.1','Biais.µ.Gamma.2','Biais.µ.Gamma3','Biais.sigma.Gamma1','Biais.sigma.Gamma.2','Biais.sigma.Gamma3')])
biais_moy
```

## Performances moyennes

```{r, echo:false}
perf_moy <- data.frame('MAE_train' = mean(MAE_train$MAE),
                       'MAE_test' = mean(MAE_test$MAE),
                       'MSE_train' = mean(MSE_train$MSE),
                       'MSE_test' = mean(MSE_test$MSE))
perf_moy
```

```{r}
write.csv(x = val_moy, file = paste(this.dir(), "/Résultats R script/valeurs_moyennes",sep=""))
write.csv(x = perf_moy, file = paste(this.dir(), "/Résultats R script/Performances_moyennes",sep=""))
```
